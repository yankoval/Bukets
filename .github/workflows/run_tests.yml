name: üß™ Run Python Tests

on: # –¢—Ä–∏–≥–≥–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞
  push: # –ü—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫–∏
    branches:
      - '**' # –ó–∞–ø—É—Å–∫–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö –≤–µ—Ç–æ–∫
  pull_request: # –ò –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Pull Request
    branches:
      - main

jobs:
  test: # –ó–∞–¥–∞—á–∞ "–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤"
    runs-on: ubuntu-latest # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π Ubuntu[citation:1]
    strategy: # –°—Ç—Ä–∞—Ç–µ–≥–∏—è: —Ç–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–µ—Ä—Å–∏—è—Ö Python
      matrix:
        python-version: ['3.9', '3.10', '3.11', '3.12'] # –£–∫–∞–∂–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –≤–µ—Ä—Å–∏–∏

    steps: # –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤
    # 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
    - name: üõí Checkout repository
      uses: actions/checkout@v4 # –í–∞–∂–Ω—ã–π –ø–µ—Ä–≤—ã–π —à–∞–≥[citation:5][citation:7]

    # 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Python (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é –∏–∑ –º–∞—Ç—Ä–∏—Ü—ã)
    - name: üêç Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v5[citation:3][citation:5]
      with:
        python-version: ${{ matrix.python-version }}

    # 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞ (—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è)
    - name: üì¶ Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
      # –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π pip (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç —Å–±–æ—Ä–∫–∏)
      # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–ª–æ–∫ –Ω–∏–∂–µ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–µ—à–∞:
      # env:
      #   CACHE_NUMBER: 1
      # with:
      #   path: ~/.cache/pip
      #   key: ${{ runner.os }}-pip-${{ env.CACHE_NUMBER }}-${{ hashFiles('**/requirements.txt') }}
      #   restore-keys: |
      #     ${{ runner.os }}-pip-${{ env.CACHE_NUMBER }}-

    # 4. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ pytest
    - name: üß™ Run tests with pytest
      run: |
        python -m pytest test_yandex_s3_module.py -v